<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E Bookstore</title>
    <style>
        :root {
            --primary-color: #4169E1;
            --text-color: #0a1635;
            --bg-color: #f0f4ff;
            --card-bg: #ffffff;
            --secondary-text: #555;
            --discount-color: #888;
            --star-color: #FFD700;
            --theme-accent: #4169E1;
        }

        .dark-mode {
            --primary-color: #5d7de9;
            --text-color: #e4e9f7;
            --bg-color: #121a2e;
            --card-bg: #1a2440;
            --secondary-text: #bbc;
            --discount-color: #aaa;
            --theme-accent: #5d7de9;
        }

        .forest-mode {
            --primary-color: #2e7d32;
            --text-color: #e0f2e9;
            --bg-color: #1b2a25;
            --card-bg: #2e3d38;
            --secondary-text: #a5d6a7;
            --discount-color: #90a4ae;
            --theme-accent: #2e7d32;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            background-color: var(--bg-color);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            color: var(--primary-color);
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo i {
            margin-right: 0.5rem;
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 2rem;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--text-color);
            transition: color 0.3s ease;
        }

        nav ul li a:hover, nav ul li a.active {
            color: var(--primary-color);
        }

        .nav-icons {
            display: flex;
            align-items: center;
        }

        .nav-icons button {
            background: none;
            border: none;
            cursor: pointer;
            margin-left: 1rem;
            color: var(--text-color);
            font-size: 1.2rem;
        }

        .theme-selector {
            position: relative;
            margin-left: 1rem;
        }

        .theme-selector select {
            padding: 0.5rem;
            border-radius: 4px;
            background-color: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--secondary-text);
            cursor: pointer;
        }

        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 3rem 5%;
            gap: 2rem;
        }

        .hero-content {
            flex: 1;
        }

        .hero-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .hero-content p {
            color: var(--secondary-text);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .hero-buttons {
            display: flex;
            gap: 1rem;
        }

        .explore-btn, .new-books-btn {
            background-color: var(--primary-color);
            color: white;
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        .explore-btn:hover, .new-books-btn:hover {
            background-color: #3050c0;
        }

        .book-display {
            flex: 1;
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding: 1rem;
            scrollbar-width: none;
        }

        .book-display::-webkit-scrollbar {
            display: none;
        }

        .book {
            min-width: 180px;
            max-width: 200px;
            height: 300px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .book:hover {
            transform: translateY(-10px);
        }

        .book img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .features {
            display: flex;
            justify-content: space-around;
            padding: 3rem 5%;
            text-align: center;
        }

        .feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 300px;
        }

        .feature i {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .feature h3 {
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .feature p {
            color: var(--secondary-text);
        }

        .page-section {
            display: none;
            padding: 2rem 5%;
        }

        .page-section.active {
            display: block;
        }

        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--text-color);
            font-size: 2.5rem;
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .book-card {
            background-color: var(--card-bg);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            height: 100%;
        }

        .book-card:hover {
            transform: translateY(-5px);
        }

        .book-card-img {
            width: 100%;
            padding: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 250px;
        }

        .book-card-img img {
            max-width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .book-card-content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .book-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--text-color);
        }

        .book-author {
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            color: var(--secondary-text);
        }

        .book-price {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .current-price {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--primary-color);
            margin-right: 0.8rem;
        }

        .original-price {
            text-decoration: line-through;
            color: var(--discount-color);
            font-size: 0.9rem;
        }

        .book-rating {
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        .star {
            color: var(--star-color);
            margin-right: 0.2rem;
        }

        .add-to-cart {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.6rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-top: auto;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .add-to-cart:hover {
            background-color: #3050c0;
        }

        .search-container, .login-modal, .feature-notification, #cartNotification {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .search-container.active, .login-modal.active, .feature-notification.active, #cartNotification.active {
            opacity: 1;
            visibility: visible;
        }

        .search-box, .login-container, .notification-box {
            width: 80%;
            max-width: 600px;
            background-color: var(--card-bg);
            border-radius: 8px;
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .search-header, .login-header, .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .close-search, .close-login, .close-notification {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
        }

        .search-form, .login-form {
            display: flex;
            margin-bottom: 1.5rem;
        }

        .search-input {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 4px 0 0 4px;
            font-size: 1rem;
            outline: none;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        .search-button {
            padding: 0.8rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0 4px 4px 0;
            cursor: pointer;
        }

        .search-content {
            color: var(--text-color);
            text-align: center;
            padding: 1rem;
            line-height: 1.6;
        }

        .notification-box {
            text-align: center;
        }

        .notification-box h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .notification-box p {
            margin-bottom: 1.5rem;
            color: var(--text-color);
            line-height: 1.6;
        }

        .notification-box button {
            padding: 0.8rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .cart-item span {
            flex-grow: 1;
        }

        .cart-item button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 0.5rem;
        }

        .login-error {
            color: #e74c3c;
            background-color: rgba(231, 76, 60, 0.1);
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            display: none;
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-color);
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .remember-me {
            display: flex;
            align-items: center;
        }

        .remember-me input {
            margin-right: 0.5rem;
        }

        .remember-me label {
            color: var(--text-color);
        }

        .forgot-password {
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .login-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .login-button:hover {
            background-color: #3050c0;
        }

        .register-link, .back-to-login {
            text-align: center;
            color: var(--text-color);
        }

        .register-link a, .back-to-login a {
            color: var(--primary-color);
            text-decoration: none;
        }

        .forgot-message {
            text-align: center;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 4px;
            display: none;
        }

        .forgot-message.success {
            color: #2ecc71;
            background-color: rgba(46, 204, 113, 0.1);
            display: block;
        }

        .reset-info {
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .subscribe-section {
            padding: 2rem 5%;
            text-align: center;
            background: url('subscribe_image.jpg') no-repeat center center;
            background-size: cover;
            position: relative;
            margin: 2rem 0;
            border-radius: 8px;
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .subscribe-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 8px;
        }

        .subscribe-content {
            position: relative;
            z-index: 1;
            color: white;
            max-width: 600px;
        }

        .subscribe-content h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .subscribe-form {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .subscribe-input {
            padding: 0.8rem;
            border: none;
            border-radius: 4px;
            width: 250px;
            font-size: 1rem;
        }

        .subscribe-button {
            padding: 0.8rem 1.5rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }

        .subscribe-button:hover {
            background-color: #3050c0;
        }

        .subscribe-message {
            margin-top: 1rem;
            display: none;
            color: #2ecc71;
            background-color: rgba(46, 204, 113, 0.1);
            padding: 10px;
            border-radius: 4px;
            width: fit-content;
            margin-left: auto;
            margin-right: auto;
        }

        .contact-section {
            padding: 3rem 5%;
            background-color: var(--card-bg);
            text-align: center;
        }

        .contact-section h2 {
            color: var(--text-color);
            margin-bottom: 1.5rem;
        }

        .contact-info {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--secondary-text);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .social-links a {
            color: var(--primary-color);
            font-size: 1.5rem;
            text-decoration: none;
        }

        .newsletter-signup {
            max-width: 500px;
            margin: 0 auto;
        }

        .newsletter-signup p {
            color: var(--secondary-text);
            margin-bottom: 1rem;
        }

        @media (max-width: 768px) {
            .hero {
                flex-direction: column;
            }

            .nav-menu {
                display: none;
            }

            .features {
                flex-direction: column;
                align-items: center;
                gap: 2rem;
            }

            .book-card {
                flex-direction: column;
            }

            .book-card-img, .book-card-content {
                width: 100%;
            }

            .subscribe-section {
                height: 250px;
            }

            .subscribe-form {
                flex-direction: column;
                align-items: center;
            }

            .subscribe-input {
                width: 100%;
                max-width: 300px;
            }

            .contact-info {
                flex-direction: column;
                gap: 1rem;
            }
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-container, .notification-box {
            animation: modalFadeIn 0.3s ease forwards;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <i class="üìö"></i> Novelnest Bookstore
        </div>
        <nav class="nav-menu">
            <ul>
                <li><a href="#" id="home-link" class="active" onclick="showPage('home'); return false;">Home</a></li>
                <li><a href="Featured.html">Featured</a></li>
                <li><a href="Discount.html">Discount</a></li>
                <li><a href="#" id="new-books-link" onclick="showPage('new-books'); return false;">New Books</a></li>
                <li><a href="Testimonial.html">Testimonial</a></li>
            </ul>
        </nav>
        <div class="nav-icons">
            <button onclick="showSearch()">üîç</button>
            <button onclick="showLogin()">üë§</button>
            <button onclick="showCart()">üõí</button>
            <button onclick="toggleDarkMode()">
                <span id="theme-icon">üåô</span>
            </button>
            <div class="theme-selector">
                <select onchange="changeTheme(this.value)">
                    <option value="light">Light</option>
                    <option value="dark">Dark</option>
                    <option value="forest">Forest</option>
                </select>
            </div>
        </div>
    </header>

    <main>
        <section id="home" class="page-section active">
            <div class="hero">
                <div class="hero-content">
                    <h1>Browse & Select E-Books</h1>
                    <p>Find the best e-books from your favorite writers, explore hundreds of books with all possible categories, take advantage of the 50% discount and much more.</p>
                    <div class="hero-buttons">
                        <button class="explore-btn" onclick="window.location.href='Featured.html'">Explore Now</button>
                        <button class="new-books-btn" onclick="showPage('new-books')">New Books</button>
                    </div>
                </div>
                <div class="book-display" id="bookDisplay">
                    <!-- Books will be dynamically added here -->
                </div>
            </div>

            <div class="subscribe-section">
                <div class="subscribe-content">
                    <h3>Subscribe to Novelnest</h3>
                    <form class="subscribe-form" onsubmit="subscribe(event)">
                        <input type="email" class="subscribe-input" id="subscribeEmail" placeholder="Enter your email" required>
                        <button type="submit" class="subscribe-button">Subscribe</button>
                    </form>
                    <div class="subscribe-message" id="subscribeMessage">Thanks for subscribing! You'll receive email notifications.</div>
                </div>
            </div>

            <div class="features">
                <div class="feature">
                    <i>üöö</i>
                    <h3>Free Shipping</h3>
                    <p>Order More Than Rs 99</p>
                </div>
                <div class="feature">
                    <i>üîí</i>
                    <h3>Secure Payment</h3>
                    <p>100% Secure Payment</p>
                </div>
                <div class="feature">
                    <i>üéß</i>
                    <h3>24/7 Support</h3>
                    <p>Call us anytime</p>
                </div>
            </div>

            <div class="contact-section">
                <h2>Contact NovelNest</h2>
                <div class="contact-info">
                    <div class="contact-item">
                        <i>üìû</i>
                        <span>+91 1122334455</span>
                    </div>
                    <div class="contact-item">
                        <i>üìç</i>
                        <span>GHRCE, Nagpur, Maharashtra, India, PIN: 440011</span>
                    </div>
                </div>
                <div class="social-links">
                    <a href="https://instagram.com/novelnest" target="_blank">Follow us on üì∑ Instagram</a>
                    <a href="https://facebook.com/novelnest" target="_blank">üìò Facebook</a>
                    <a href="https://x.com/novelnest" target="_blank">üê¶ X</a>
                </div>
                <div class="newsletter-signup">
                    <p>Stay updated with our latest releases and exclusive offers by joining our newsletter!</p>
                    <form class="subscribe-form" onsubmit="subscribe(event)">
                        <input type="email" class="subscribe-input" placeholder="Enter your email" required>
                        <button type="submit" class="subscribe-button">Join Now</button>
                    </form>
                </div>
            </div>
        </section>

        <section id="new-books" class="page-section">
            <h2 class="page-title">New Books</h2>
            <div class="books-grid" id="newBooksGrid">
                <!-- New books added dynamically here -->
            </div>
        </section>
    </main>

    <div id="searchContainer" class="search-container">
        <div class="search-box">
            <div class="search-header">
                <h3>Search Books</h3>
                <button class="close-search" onclick="closeSearch()">‚úï</button>
            </div>
            <form class="search-form" onsubmit="performSearch(event)">
                <input type="text" class="search-input" id="searchInput" placeholder="Search for books...">
                <button type="submit" class="search-button">Search</button>
            </form>
            <div class="search-content">
                <p>Our bookstore is currently building its inventory.</p>
                <p>Please check back soon for a more collection.</p>
            </div>
        </div>
    </div>

    <div id="featureNotification" class="feature-notification">
        <div class="notification-box">
            <div class="notification-header">
                <h3 id="featureTitle">Feature Coming Soon</h3>
                <button class="close-notification" onclick="closeFeatureNotification()">‚úï</button>
            </div>
            <p id="featureMessage">This feature is currently under development. Please check back later!</p>
            <button onclick="closeFeatureNotification()">Close</button>
        </div>
    </div>

    <div id="cartNotification" class="feature-notification">
        <div class="notification-box">
            <div class="notification-header">
                <h3>Shopping Cart</h3>
                <button class="close-notification" onclick="closeCartNotification()">‚úï</button>
            </div>
            <div id="cartItems"></div>
            <button onclick="window.location.href='checkout.html'">Proceed to Checkout</button>
            <button onclick="closeCartNotification()">Close</button>
        </div>
    </div>

    <div id="loginModal" class="login-modal">
        <div class="login-container">
            <div class="login-header">
                <h3 id="loginTitle">Login to Novelnest</h3>
                <button class="close-login" onclick="closeLogin()">‚úï</button>
            </div>
            <div class="login-error" id="loginError"></div>
            <form class="login-form" id="loginForm" onsubmit="handleAuth(event)">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required placeholder="Enter your password">
                </div>
                <div class="form-group" id="emailGroup" style="display: none;">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email">
                </div>
                <div class="form-options">
                    <div class="remember-me">
                        <input type="checkbox" id="remember" name="remember">
                        <label for="remember">Remember me</label>
                    </div>
                    <a href="#" class="forgot-password" onclick="showForgotPassword(); return false;">Forgot password?</a>
                </div>
                <button type="submit" class="login-button" id="authButton">Login</button>
                <div class="register-link" id="toggleAuth">
                    Don't have an account? <a href="#" onclick="toggleRegister(); return false;">Register</a>
                </div>
            </form>
        </div>
    </div>

    <div id="forgotPasswordModal" class="login-modal">
        <div class="login-container">
            <div class="login-header">
                <h3>Reset Password</h3>
                <button class="close-login" onclick="closeForgotPassword()">‚úï</button>
            </div>
            <div class="forgot-message" id="forgotMessage"></div>
            <form class="login-form" onsubmit="resetPassword(event)">
                <div class="form-group">
                    <label for="resetEmail">Email Address</label>
                    <input type="email" id="resetEmail" name="resetEmail" required placeholder="Enter your email address">
                </div>
                <p class="reset-info">We'll send you a link to reset your password.</p>
                <button type="submit" class="login-button">Reset Password</button>
                <div class="back-to-login">
                    <a href="#" onclick="backToLogin(); return false;">Back to login</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        const books = [
            { title: 'Romance Novel', cover: '/api/placeholder/180/300', color: '#1a2d5e' },
            { title: 'Celtic Tales', cover: '/api/placeholder/180/300', color: '#0a483d' },
            { title: 'Wedding Invitation', cover: '/api/placeholder/180/300', color: '#192442' },
            { title: 'Mystery Adventures', cover: '/api/placeholder/180/300', color: '#5a2020' },
            { title: 'Science Fiction', cover: '/api/placeholder/180/300', color: '#252550' },
            { title: 'Biography', cover: '/api/placeholder/180/300', color: '#3d2b4a' },
            { title: 'Cookbook', cover: '/api/placeholder/180/300', color: '#3d3a20' },
            { title: 'History', cover: '/api/placeholder/180/300', color: '#2b3a38' }
        ];

        const newBooks = [
            { title: 'Too Good To Be True', author: 'Prajakta Koli', price: 249, originalPrice: 500, rating: 4, image: 'book1.jpg' },
            { title: 'Ratan Tata', author: 'Thomas Mathe', price: 299, originalPrice: 600, rating: 4.5, image: 'book2.jpg' },
            { title: 'What\'s Your Dream?', author: 'Simon Squibb', price: 399, originalPrice: 599, rating: 4.5, image: 'book3.jpg' },
            { title: 'A Brief History of Intelligence', author: 'Max Bennett', price: 449, originalPrice: 999, rating: 5, image: 'book4.jpg' },
            { title: 'Water Moon', author: 'Samantha Sotto.', price: 499, originalPrice: 1299, rating: 4, image: 'book5.jpg' },
            { title: 'Unloved The Art of the Breakup', author: 'Harshita Gupta', price: 599, originalPrice: 1499, rating: 4.5, image: 'book6.jpg' },
            { title: 'Best Beloved', author: 'Cameron, Stella', price: 199, originalPrice: 1099, rating: 4, image: 'book7.jpg' },
            { title: 'Still Believe in Love', author: 'Mycah Edwards', price: 299, originalPrice: 1299, rating: 4.5, image: 'book8.jpg' }
        ];

        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function generateBooks() {
            const bookDisplay = document.getElementById('bookDisplay');
            bookDisplay.innerHTML = '';
            books.forEach((book, index) => {
                const bookElement = document.createElement('div');
                bookElement.className = 'book';
                bookElement.innerHTML = `
                    <a href="Fiction.html" style="text-decoration: none; color: inherit;">
                        <div style="height: 100%; background-color: ${book.color}; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; padding: 20px;">
                            <h3 style="margin-bottom: 15px;">${book.title}</h3>
                            <div style="border: 1px solid rgba(255,255,255,0.3); width: 80%; margin: 10px auto;"></div>
                            <p style="font-style: italic; margin-top: 15px;">A captivating story</p>
                        </div>
                    </a>
                `;
                bookDisplay.appendChild(bookElement);
            });
        }

        function createStarRating(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            let stars = '';
            for (let i = 0; i < fullStars; i++) {
                stars += '<span class="star">‚òÖ</span>';
            }
            if (halfStar) {
                stars += '<span class="star">‚òÖ</span>';
            }
            for (let i = 0; i < emptyStars; i++) {
                stars += '<span class="star" style="opacity: 0.3;">‚òÖ</span>';
            }
            return stars;
        }

        function loadNewBooks() {
            const newBooksGrid = document.getElementById('newBooksGrid');
            newBooksGrid.innerHTML = '';
            newBooks.forEach(book => {
                const bookCard = document.createElement('div');
                bookCard.className = 'book-card';
                bookCard.innerHTML = `
                    <div class="book-card-img">
                        <img src="${book.image}" alt="${book.title}" />
                    </div>
                    <div class="book-card-content">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">by ${book.author}</p>
                        <div class="book-price">
                            <span class="current-price">${book.price.toFixed(2)}</span>
                            <span class="original-price">${book.originalPrice.toFixed(2)}</span>
                        </div>
                        <div class="book-rating">
                            ${createStarRating(book.rating)}
                        </div>
                        <button class="add-to-cart" onclick="addToCart('${book.title}', ${book.price})">Add to Cart</button>
                    </div>
                `;
                newBooksGrid.appendChild(bookCard);
            });
        }

        function showPage(pageId) {
            const navLinks = document.querySelectorAll('nav ul li a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.id === pageId + '-link') {
                    link.classList.add('active');
                }
            });
            const sections = document.querySelectorAll('.page-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            const selectedSection = document.getElementById(pageId);
            if (selectedSection) {
                selectedSection.classList.add('active');
                if (pageId === 'new-books') {
                    loadNewBooks();
                }
            }
        }

        function showSearch() {
            document.getElementById('searchContainer').classList.add('active');
            document.getElementById('searchInput').focus();
        }

        function closeSearch() {
            document.getElementById('searchContainer').classList.remove('active');
        }

        function performSearch(event) {
            event.preventDefault();
            const searchTerm = document.getElementById('searchInput').value.trim();
            if (searchTerm) {
                document.querySelector('.search-content').innerHTML = `
                    <p>We're still building our inventory for "${searchTerm}".</p>
                    <p>New books are being added daily. Please check back soon!</p>
                `;
            }
        }

        function showFeatureInDevelopment(title, message) {
            document.getElementById('featureTitle').textContent = title;
            document.getElementById('featureMessage').textContent = message;
            document.getElementById('featureNotification').classList.add('active');
            return false;
        }

        function closeFeatureNotification() {
            document.getElementById('featureNotification').classList.remove('active');
        }

        function addToCart(bookTitle, price) {
            const existingItem = cart.find(item => item.title === bookTitle);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ title: bookTitle, price: price, quantity: 1 });
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            document.getElementById('cartNotification').classList.add('active');
            updateCartDisplay();
            setTimeout(closeCartNotification, 3000);
        }

        function removeFromCart(bookTitle) {
            const item = cart.find(item => item.title === bookTitle);
            if (item) {
                item.quantity -= 1;
                if (item.quantity <= 0) {
                    cart = cart.filter(item => item.title !== bookTitle);
                }
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>Your cart is empty.</p>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <span>${item.title} (‚Çπ${item.price} x ${item.quantity})</span>
                        <button onclick="addToCart('${item.title}', ${item.price})">+</button>
                        <button onclick="removeFromCart('${item.title}')">-</button>
                    </div>
                `).join('');
            }
        }

        function showCart() {
            document.getElementById('cartNotification').classList.add('active');
            updateCartDisplay();
        }

        function closeCartNotification() {
            document.getElementById('cartNotification').classList.remove('active');
        }

        function changeTheme(theme) {
            const body = document.body;
            body.classList.remove('dark-mode', 'forest-mode');
            const themeIcon = document.getElementById('theme-icon');
            if (theme === 'dark') {
                body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
            } else if (theme === 'forest') {
                body.classList.add('forest-mode');
                themeIcon.textContent = 'üå≤';
            } else {
                themeIcon.textContent = 'üåô';
            }
            localStorage.setItem('theme', theme);
        }

        function checkTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            changeTheme(savedTheme);
            document.querySelector('.theme-selector select').value = savedTheme;
        }

        function showLogin() {
            document.getElementById('loginModal').classList.add('active');
            document.getElementById('username').focus();
            document.getElementById('loginTitle').textContent = 'Login to Novelnest';
            document.getElementById('authButton').textContent = 'Login';
            document.getElementById('emailGroup').style.display = 'none';
            document.getElementById('toggleAuth').innerHTML = `Don't have an account? <a href="#" onclick="toggleRegister(); return false;">Register</a>`;
        }

        function closeLogin() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('loginError').style.display = 'none';
            document.getElementById('loginError').textContent = '';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('email').value = '';
        }

        function toggleRegister() {
            const isRegister = document.getElementById('loginTitle').textContent.includes('Register');
            document.getElementById('loginTitle').textContent = isRegister ? 'Login to Novelnest' : 'Register for Novelnest';
            document.getElementById('authButton').textContent = isRegister ? 'Login' : 'Register';
            document.getElementById('emailGroup').style.display = isRegister ? 'none' : 'block';
            document.getElementById('toggleAuth').innerHTML = isRegister 
                ? `Don't have an account? <a href="#" onclick="toggleRegister(); return false;">Register</a>`
                : `Already have an account? <a href="#" onclick="toggleRegister(); return false;">Login</a>`;
        }

        function handleAuth(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const email = document.getElementById('email').value;
            const loginError = document.getElementById('loginError');
            const isRegister = document.getElementById('authButton').textContent === 'Register';

            if (isRegister) {
                const userData = `${username},${password},${email}\n`;
                try {
                    const existingData = localStorage.getItem('users') || '';
                    if (existingData.includes(`${username},`)) {
                        loginError.textContent = 'Username already exists.';
                        loginError.style.display = 'block';
                        return;
                    }
                    localStorage.setItem('users', existingData + userData);
                    showFeatureInDevelopment('Success', 'Registration successful! You can now log in.');
                    toggleRegister();
                    closeLogin();
                } catch (e) {
                    loginError.textContent = 'Error saving user data.';
                    loginError.style.display = 'block';
                }
            } else {
                const users = localStorage.getItem('users')?.split('\n').filter(line => line) || [];
                const user = users.find(line => {
                    const [u, p] = line.split(',');
                    return u === username && p === password;
                });
                if (user) {
                    loginError.style.display = 'none';
                    closeLogin();
                    document.querySelector('.nav-icons button:nth-child(2)').textContent = '‚úì';
                    showFeatureInDevelopment('Welcome', `You've successfully logged in as ${username}!`);
                } else {
                    loginError.textContent = 'Invalid username or password.';
                    loginError.style.display = 'block';
                }
            }
        }

        function showForgotPassword() {
            closeLogin();
            document.getElementById('forgotPasswordModal').classList.add('active');
            document.getElementById('resetEmail').focus();
        }

        function closeForgotPassword() {
            document.getElementById('forgotPasswordModal').classList.remove('active');
            document.getElementById('forgotMessage').className = 'forgot-message';
            document.getElementById('forgotMessage').textContent = '';
            document.getElementById('resetEmail').value = '';
        }

        function resetPassword(event) {
            event.preventDefault();
            const email = document.getElementById('resetEmail').value;
            const forgotMessage = document.getElementById('forgotMessage');
            forgotMessage.textContent = 'If an account exists with this email, you will receive a password reset link shortly.';
            forgotMessage.className = 'forgot-message success';
            setTimeout(() => {
                closeForgotPassword();
                showLogin();
            }, 3000);
        }

        function backToLogin() {
            closeForgotPassword();
            showLogin();
        }

        function subscribe(event) {
            event.preventDefault();
            const email = document.querySelector('.subscribe-form input[type="email"]').value;
            const message = document.getElementById('subscribeMessage');
            message.style.display = 'block';
            document.querySelector('.subscribe-form input[type="email"]').value = '';
            setTimeout(() => {
                message.style.display = 'none';
            }, 3000);
        }

        window.onload = function() {
            generateBooks();
            loadNewBooks();
            checkTheme();
            const bookDisplay = document.getElementById('bookDisplay');
            setInterval(() => {
                if (bookDisplay.scrollLeft < bookDisplay.scrollWidth - bookDisplay.clientWidth) {
                    bookDisplay.scrollLeft += 200;
                } else {
                    bookDisplay.scrollLeft = 0;
                }
            }, 3000);
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeSearch();
                    closeFeatureNotification();
                    closeCartNotification();
                    closeLogin();
                    closeForgotPassword();
                }
            });
        };
    </script>
</body>
</html>